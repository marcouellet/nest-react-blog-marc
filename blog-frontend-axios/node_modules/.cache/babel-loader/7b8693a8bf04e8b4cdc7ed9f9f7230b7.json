{"ast":null,"code":"import _slicedToArray from \"F:\\\\Documents\\\\Documents\\\\_Nest\\\\nest-react-blog-marc\\\\blog-frontend-axios\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\Documents\\\\Documents\\\\_Nest\\\\nest-react-blog-marc\\\\blog-frontend-axios\\\\src\\\\components\\\\Navbar.tsx\";\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport useAuth from '../contexts/auth';\nimport { createActionLogout } from '../reducers/auth';\nimport AUTHAPI from '../services/api/AuthApiService';\nimport { toast } from \"react-toastify\";\nimport { UserRole } from '../types';\nimport ImageUpload from './common/ImageUpload';\nimport Image from './common/Image';\n\nconst Navbar = () => {\n  const _useAuth = useAuth(),\n        state = _useAuth.state,\n        dispatch = _useAuth.dispatch;\n\n  const navigate = useNavigate();\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        userImage = _useState2[0],\n        setUserImage = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        imageChanged = _useState4[0],\n        setImageChanged = _useState4[1];\n\n  const handleLogout = () => {\n    dispatch(createActionLogout());\n    AUTHAPI.logout();\n    toast.info(`${state.user.username} is logged out`);\n    setTimeout(() => {\n      navigate('/');\n    }, 1500);\n  };\n\n  const isAdministrator = () => {\n    var _state$user;\n\n    return state.isAuthenticated && ((_state$user = state.user) === null || _state$user === void 0 ? void 0 : _state$user.role) === UserRole.ADMIN;\n  };\n\n  const handleImageUpload = image => {\n    setUserImage(image);\n  };\n\n  const handleDeleteImage = () => {\n    setUserImage(undefined);\n  };\n\n  const imageMaxSize = {\n    maxWidth: 600,\n    maxHeight: 400\n  };\n  return React.createElement(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container-fluid position-relative no-side-padding\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"menu-nav-icon\",\n    \"data-nav-menu\": \"#main-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"ion-navicon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  })), state.user && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"User:\\xA0\", state.user.username, \"\\xA0\", isAdministrator() && '(admin)')), React.createElement(\"div\", {\n    className: \"form-group col-md-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"col-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \" Image: \"), state.user.image && React.createElement(\"button\", {\n    className: \"btn btn-secondary col-md-3\",\n    onClick: () => handleDeleteImage(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Delete Image\"), React.createElement(ImageUpload, {\n    onImageUpload: handleImageUpload,\n    resize: imageMaxSize,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }))), userImage && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Image, {\n    imageData: userImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(\"ul\", {\n    className: \"main-menu visible-on-click\",\n    id: \"main-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \" Home \")), !state.isLoading && state.isAuthenticated && React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/post/create\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \" Create Post\")), !state.isLoading && !state.isAuthenticated && React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \" Log In \")), !state.isLoading && !state.isAuthenticated && React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \" Register \")), !state.isLoading && isAdministrator() && React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \" Admin User\")), !state.isLoading && isAdministrator() && React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \" Admin Category\")), !state.isLoading && state.user && React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: handleLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Log Out\"))))));\n};\n\nexport default Navbar;","map":{"version":3,"sources":["F:/Documents/Documents/_Nest/nest-react-blog-marc/blog-frontend-axios/src/components/Navbar.tsx"],"names":["React","useState","Link","useNavigate","useAuth","createActionLogout","AUTHAPI","toast","UserRole","ImageUpload","Image","Navbar","state","dispatch","navigate","userImage","setUserImage","imageChanged","setImageChanged","handleLogout","logout","info","user","username","setTimeout","isAdministrator","isAuthenticated","role","ADMIN","handleImageUpload","image","handleDeleteImage","undefined","imageMaxSize","maxWidth","maxHeight","isLoading"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,kBAAT,QAAmC,kBAAnC;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,QAAT,QAAoD,UAApD;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAMC,MAAM,GAAG,MAAM;AAAA,mBACWP,OAAO,EADlB;AAAA,QACTQ,KADS,YACTA,KADS;AAAA,QACFC,QADE,YACFA,QADE;;AAEjB,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;;AAFiB,oBAGiBF,QAAQ,EAHzB;AAAA;AAAA,QAGVc,SAHU;AAAA,QAGCC,YAHD;;AAAA,qBAIuBf,QAAQ,EAJ/B;AAAA;AAAA,QAIVgB,YAJU;AAAA,QAIIC,eAJJ;;AAMhB,QAAMC,YAAY,GAAG,MAAM;AACxBN,IAAAA,QAAQ,CAACR,kBAAkB,EAAnB,CAAR;AACAC,IAAAA,OAAO,CAACc,MAAR;AACAb,IAAAA,KAAK,CAACc,IAAN,CAAY,GAAET,KAAK,CAACU,IAAN,CAAYC,QAAS,gBAAnC;AACAC,IAAAA,UAAU,CAAC,MAAM;AACbV,MAAAA,QAAQ,CAAC,GAAD,CAAR;AACD,KAFO,EAEL,IAFK,CAAV;AAGD,GAPF;;AASD,QAAMW,eAAe,GAAG;AAAA;;AAAA,WAAMb,KAAK,CAACc,eAAN,IAAyB,gBAAAd,KAAK,CAACU,IAAN,4DAAYK,IAAZ,MAAqBnB,QAAQ,CAACoB,KAA7D;AAAA,GAAxB;;AAEA,QAAMC,iBAAiB,GAAIC,KAAD,IAAsB;AAC5Cd,IAAAA,YAAY,CAACc,KAAD,CAAZ;AACD,GAFH;;AAIA,QAAMC,iBAAiB,GAAG,MAAM;AAC5Bf,IAAAA,YAAY,CAACgB,SAAD,CAAZ;AACH,GAFD;;AAIA,QAAMC,YAA4B,GAAG;AAACC,IAAAA,QAAQ,EAAC,GAAV;AAAeC,IAAAA,SAAS,EAAC;AAAzB,GAArC;AAEE,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAA+B,qBAAc,YAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAIMvB,KAAK,CAACU,IAAN,IACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAgBV,KAAK,CAACU,IAAN,CAAWC,QAA3B,UAA2CE,eAAe,MAAM,SAAhE,CADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAO,IAAA,SAAS,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAEMb,KAAK,CAACU,IAAN,CAAWQ,KAAX,IACF;AAAQ,IAAA,SAAS,EAAC,4BAAlB;AAAgD,IAAA,OAAO,EAAG,MAAMC,iBAAiB,EAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,EAOI,oBAAC,WAAD;AAAa,IAAA,aAAa,EAAEF,iBAA5B;AAA+C,IAAA,MAAM,EAAEI,YAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CADJ,CAJJ,EAeMlB,SAAS,IACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAEA,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAhBJ,EAqBV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBU,CALR,EA8BI;AAAI,IAAA,SAAS,EAAC,4BAAd;AAA2C,IAAA,EAAE,EAAC,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE,UAAjB;AAA6B,IAAA,EAAE,EAAE,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAJ,CADJ,EAEK,CAACH,KAAK,CAACwB,SAAP,IAAoBxB,KAAK,CAACc,eAA1B,IACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE,UAAjB;AAA6B,IAAA,EAAE,EAAE,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAJ,CAHR,EAKK,CAACd,KAAK,CAACwB,SAAP,IAAoB,CAACxB,KAAK,CAACc,eAA3B,IACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE,UAAjB;AAA6B,IAAA,EAAE,EAAE,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CANR,EAQK,CAACd,KAAK,CAACwB,SAAP,IAAoB,CAACxB,KAAK,CAACc,eAA3B,IACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE,UAAjB;AAA6B,IAAA,EAAE,EAAE,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAJ,CATR,EAWK,CAACd,KAAK,CAACwB,SAAP,IAAoBX,eAAe,EAAnC,IACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE,UAAjB;AAA6B,IAAA,EAAE,EAAE,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAJ,CAZR,EAcK,CAACb,KAAK,CAACwB,SAAP,IAAoBX,eAAe,EAAnC,IACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE,UAAjB;AAA6B,IAAA,EAAE,EAAE,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAJ,CAfR,EAiBK,CAACb,KAAK,CAACwB,SAAP,IAAoBxB,KAAK,CAACU,IAA1B,IACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,SAAS,EAAC,KAAlB;AAAwB,IAAA,OAAO,EAAEH,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CADJ,CAlBR,CA9BJ,CADJ,CADF;AA8DL,CAzFD;;AA2FA,eAAeR,MAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport useAuth from '../contexts/auth';\r\nimport { createActionLogout } from '../reducers/auth';\r\nimport AUTHAPI from '../services/api/AuthApiService';\r\nimport { toast } from \"react-toastify\";\r\nimport { UserRole, ImageData, ImageSizeProps } from '../types';\r\nimport ImageUpload from './common/ImageUpload';\r\nimport Image from './common/Image';\r\n\r\nconst Navbar = () => {\r\n    const { state, dispatch } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [userImage, setUserImage] = useState<ImageData>();\r\n    const [imageChanged, setImageChanged] = useState<boolean>();\r\n\r\n     const handleLogout = () => {\r\n        dispatch(createActionLogout());\r\n        AUTHAPI.logout();\r\n        toast.info(`${state.user!.username} is logged out`);\r\n        setTimeout(() => {\r\n            navigate('/');\r\n          }, 1500);\r\n      };\r\n\r\n    const isAdministrator = () => state.isAuthenticated && state.user?.role === UserRole.ADMIN;\r\n\r\n    const handleImageUpload = (image: ImageData) => {\r\n        setUserImage(image);\r\n      }\r\n      \r\n    const handleDeleteImage = () => {\r\n        setUserImage(undefined);\r\n    }\r\n\r\n    const imageMaxSize: ImageSizeProps = {maxWidth:600, maxHeight:400};\r\n\r\n      return (\r\n        <header>\r\n            <div className=\"container-fluid position-relative no-side-padding\">\r\n                <div className=\"menu-nav-icon\" data-nav-menu=\"#main-menu\">\r\n                    <i className=\"ion-navicon\" />\r\n                </div>\r\n                { state.user && (\r\n                    <div>\r\n                        <div>\r\n                            <h5>User:&nbsp;{state.user.username}&nbsp;{isAdministrator() && '(admin)'}</h5>\r\n                        </div>\r\n                        <div className=\"form-group col-md-4\">\r\n                            <div className=\"row\">\r\n                                <label className=\"col-md-2\"> Image: </label>\r\n                                { state.user.image && \r\n                                <button className=\"btn btn-secondary col-md-3\"  onClick={ () => handleDeleteImage() } >\r\n                                    Delete Image\r\n                                </button>  \r\n                                }  \r\n                                <ImageUpload onImageUpload={handleImageUpload} resize={imageMaxSize}/>                \r\n                            </div>\r\n                        </div>\r\n                        { userImage && \r\n                        <div>\r\n                            <Image imageData={userImage}/> \r\n                            <br/>\r\n                        </div>\r\n          }\r\n          <br/>\r\n\r\n                    </div>                \r\n                )}\r\n                <ul className=\"main-menu visible-on-click\" id=\"main-menu\">\r\n                    <li><Link className={\"nav-link\"} to={\"/\"}> Home </Link></li>\r\n                    {!state.isLoading && state.isAuthenticated && (\r\n                        <li><Link className={\"nav-link\"} to={\"/post/create\"}> Create Post</Link></li>\r\n                    )}\r\n                    {!state.isLoading && !state.isAuthenticated && (\r\n                        <li><Link className={\"nav-link\"} to={\"/login\"}> Log In </Link></li>\r\n                    )}\r\n                    {!state.isLoading && !state.isAuthenticated && (\r\n                        <li><Link className={\"nav-link\"} to={\"/register\"}> Register </Link></li>\r\n                    )}\r\n                    {!state.isLoading && isAdministrator() && (\r\n                        <li><Link className={\"nav-link\"} to={\"/user\"}> Admin User</Link></li>\r\n                    )}\r\n                    {!state.isLoading && isAdministrator() && (\r\n                        <li><Link className={\"nav-link\"} to={\"/category\"}> Admin Category</Link></li>\r\n                    )}\r\n                    {!state.isLoading && state.user && (\r\n                        <li>\r\n                            <div>\r\n                                <button className=\"btn\" onClick={handleLogout}>\r\n                                    Log Out \r\n                                </button>\r\n                            </div>\r\n                        </li>\r\n                    )}\r\n                </ul>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Navbar;\r\n"]},"metadata":{},"sourceType":"module"}