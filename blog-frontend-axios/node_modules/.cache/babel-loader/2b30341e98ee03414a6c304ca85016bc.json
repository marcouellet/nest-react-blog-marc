{"ast":null,"code":"import API, { TOKEN_KEY, setToken } from './APIUtils';\nimport { setLocalStorage } from '../../utils/utils';\n\nfunction handleUserData(user) {\n  setLocalStorage(TOKEN_KEY, user.token);\n  setToken(user.token);\n  return user;\n}\n\nfunction getCurrentUser() {\n  return API.get('/auth/user');\n}\n\nfunction login(email, password) {\n  return API.post('/auth/login', {\n    user: {\n      email,\n      password\n    }\n  }).then(response => handleUserData(response.data)).catch(error => console.log(error));\n}\n\nfunction register(username, email, password) {\n  return API.post('/auth/register', {\n    user: {\n      username,\n      email,\n      password\n    }\n  }).then(response => handleUserData(response.data)).catch(error => console.log(error));\n} // function register(\n//   username: string,\n//   email: string,\n//   password: string,\n// ) : Promise<User> {\n//   const user: User = {username, email, password};\n//   return API.post<User>('/auth/register', {\n//     user: {username, email, password}\n//   })\n//   .then((response) => handleUserData(response.data))\n//   .catch((error) => {\n//     console.log(error);\n//   });\n// }\n\n\nfunction logout() {\n  localStorage.removeItem(TOKEN_KEY);\n  setToken(null);\n}\n\nconst AUTHAPI = {\n  getCurrentUser,\n  login,\n  register,\n  logout\n};\nexport default AUTHAPI;","map":{"version":3,"sources":["F:/Documents/Documents/_Nest/nest-react-blog-marc/blog-frontend-axios/src/services/api/AuthAPI.ts"],"names":["API","TOKEN_KEY","setToken","setLocalStorage","handleUserData","user","token","getCurrentUser","get","login","email","password","post","then","response","data","catch","error","console","log","register","username","logout","localStorage","removeItem","AUTHAPI"],"mappings":"AAAA,OAAOA,GAAP,IAAcC,SAAd,EAA0BC,QAA1B,QAA0C,YAA1C;AAEA,SAASC,eAAT,QAAgC,mBAAhC;;AAEA,SAASC,cAAT,CAAwBC,IAAxB,EAA0C;AACxCF,EAAAA,eAAe,CAACF,SAAD,EAAYI,IAAI,CAACC,KAAjB,CAAf;AACAJ,EAAAA,QAAQ,CAACG,IAAI,CAACC,KAAN,CAAR;AACA,SAAOD,IAAP;AACD;;AAED,SAASE,cAAT,GAA0B;AACxB,SAAOP,GAAG,CAACQ,GAAJ,CAAc,YAAd,CAAP;AACD;;AAED,SAASC,KAAT,CAAeC,KAAf,EAA8BC,QAA9B,EAAgD;AAC9C,SAAOX,GAAG,CAACY,IAAJ,CAAe,aAAf,EAA8B;AAACP,IAAAA,IAAI,EAAE;AAAEK,MAAAA,KAAF;AAASC,MAAAA;AAAT;AAAP,GAA9B,EACJE,IADI,CACEC,QAAD,IAAcV,cAAc,CAACU,QAAQ,CAACC,IAAV,CAD7B,EAEJC,KAFI,CAEGC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAFb,CAAP;AAGD;;AAED,SAASG,QAAT,CAAkBC,QAAlB,EAAoCX,KAApC,EAAmDC,QAAnD,EAAqE;AACnE,SAAOX,GAAG,CAACY,IAAJ,CAAe,gBAAf,EAAiC;AAAEP,IAAAA,IAAI,EAAE;AAAEgB,MAAAA,QAAF;AAAYX,MAAAA,KAAZ;AAAmBC,MAAAA;AAAnB;AAAR,GAAjC,EACNE,IADM,CACAC,QAAD,IAAcV,cAAc,CAACU,QAAQ,CAACC,IAAV,CAD3B,EAENC,KAFM,CAECC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAFX,CAAP;AAGD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASK,MAAT,GAAkB;AAChBC,EAAAA,YAAY,CAACC,UAAb,CAAwBvB,SAAxB;AACAC,EAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;;AAED,MAAMuB,OAAO,GAAG;AAAClB,EAAAA,cAAD;AAAiBE,EAAAA,KAAjB;AAAwBW,EAAAA,QAAxB;AAAkCE,EAAAA;AAAlC,CAAhB;AAEA,eAAeG,OAAf","sourcesContent":["import API, { TOKEN_KEY , setToken } from './APIUtils';\r\nimport { IUser, User } from '../../types';\r\nimport { setLocalStorage } from '../../utils/utils';\r\n\r\nfunction handleUserData(user: User): User {\r\n  setLocalStorage(TOKEN_KEY, user.token!);\r\n  setToken(user.token!);\r\n  return user;\r\n}\r\n\r\nfunction getCurrentUser() {\r\n  return API.get<User>('/auth/user');\r\n}\r\n\r\nfunction login(email: string, password: string) {\r\n  return API.post<User>('/auth/login', {user: { email, password }})\r\n    .then((response) => handleUserData(response.data))\r\n    .catch((error) => console.log(error));  \r\n}\r\n\r\nfunction register(username: string, email: string, password: string) {\r\n  return API.post<User>('/auth/register', { user: { username, email, password }})\r\n  .then((response) => handleUserData(response.data))\r\n  .catch((error) => console.log(error)); \r\n}\r\n\r\n// function register(\r\n//   username: string,\r\n//   email: string,\r\n//   password: string,\r\n// ) : Promise<User> {\r\n//   const user: User = {username, email, password};\r\n//   return API.post<User>('/auth/register', {\r\n//     user: {username, email, password}\r\n//   })\r\n//   .then((response) => handleUserData(response.data))\r\n//   .catch((error) => {\r\n//     console.log(error);\r\n//   });\r\n// }\r\n\r\nfunction logout() {\r\n  localStorage.removeItem(TOKEN_KEY);\r\n  setToken(null);\r\n}\r\n\r\nconst AUTHAPI = {getCurrentUser, login, register, logout}\r\n\r\nexport default AUTHAPI\r\n"]},"metadata":{},"sourceType":"module"}