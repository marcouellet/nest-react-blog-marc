{"ast":null,"code":"import _objectWithoutProperties from \"F:\\\\Documents\\\\Documents\\\\_Nest\\\\nest-react-blog-marc\\\\blog-frontend-axios\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport API, { TOKEN_KEY, setToken } from './APIUtils';\nimport { setLocalStorage } from '../../utils/utils';\n\nfunction handleUserResponse(_ref) {\n  let _ref$user = _ref.user,\n      token = _ref$user.token,\n      user = _objectWithoutProperties(_ref$user, [\"token\"]);\n\n  setLocalStorage(TOKEN_KEY, token);\n  setToken(token);\n  return user;\n}\n\nfunction getCurrentUser() {\n  return API.get('/user');\n}\n\nfunction login(email, password) {\n  return API.post('/users/login', {\n    user: {\n      email,\n      password\n    }\n  }).then(user => handleUserResponse(user.data));\n}\n\nfunction register(user) {\n  return API.post('/users', {\n    user\n  }).then(user => handleUserResponse(user.data));\n}\n\nfunction updateUser(user) {\n  return API.put('/user', {\n    user\n  });\n}\n\nfunction logout() {\n  localStorage.removeItem(TOKEN_KEY);\n  setToken(null);\n}\n\nconst AUTHAPI = {\n  getCurrentUser,\n  updateUser,\n  login,\n  register,\n  logout\n};\nexport default AUTHAPI;","map":{"version":3,"sources":["F:/Documents/Documents/_Nest/nest-react-blog-marc/blog-frontend-axios/src/services/api/AuthAPI.ts"],"names":["API","TOKEN_KEY","setToken","setLocalStorage","handleUserResponse","user","token","getCurrentUser","get","login","email","password","post","then","data","register","updateUser","put","logout","localStorage","removeItem","AUTHAPI"],"mappings":";AAAA,OAAOA,GAAP,IAAcC,SAAd,EAA0BC,QAA1B,QAA0C,YAA1C;AAEA,SAASC,eAAT,QAAgC,mBAAhC;;AAMA,SAASC,kBAAT,OAAgE;AAAA,uBAAlCC,IAAkC;AAAA,MAA1BC,KAA0B,aAA1BA,KAA0B;AAAA,MAAhBD,IAAgB;;AAC9DF,EAAAA,eAAe,CAACF,SAAD,EAAYK,KAAZ,CAAf;AACAJ,EAAAA,QAAQ,CAACI,KAAD,CAAR;AACA,SAAOD,IAAP;AACD;;AAED,SAASE,cAAT,GAA0B;AACxB,SAAOP,GAAG,CAACQ,GAAJ,CAAc,OAAd,CAAP;AACD;;AAED,SAASC,KAAT,CAAeC,KAAf,EAA8BC,QAA9B,EAAgD;AAC9C,SAAOX,GAAG,CAACY,IAAJ,CAAe,cAAf,EAA+B;AACpCP,IAAAA,IAAI,EAAE;AAAEK,MAAAA,KAAF;AAASC,MAAAA;AAAT;AAD8B,GAA/B,EAEJE,IAFI,CAEER,IAAD,IAAUD,kBAAkB,CAACC,IAAI,CAACS,IAAN,CAF7B,CAAP;AAGD;;AAED,SAASC,QAAT,CAAkBV,IAAlB,EAIG;AACD,SAAOL,GAAG,CAACY,IAAJ,CAAe,QAAf,EAAyB;AAAEP,IAAAA;AAAF,GAAzB,EAAmCQ,IAAnC,CAAyCR,IAAD,IAC7CD,kBAAkB,CAACC,IAAI,CAACS,IAAN,CADb,CAAP;AAGD;;AAED,SAASE,UAAT,CAAoBX,IAApB,EAAiE;AAC/D,SAAOL,GAAG,CAACiB,GAAJ,CAAc,OAAd,EAAuB;AAAEZ,IAAAA;AAAF,GAAvB,CAAP;AACD;;AAED,SAASa,MAAT,GAAkB;AAChBC,EAAAA,YAAY,CAACC,UAAb,CAAwBnB,SAAxB;AACAC,EAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;;AAED,MAAMmB,OAAO,GAAG;AAACd,EAAAA,cAAD;AAAiBS,EAAAA,UAAjB;AAA6BP,EAAAA,KAA7B;AAAoCM,EAAAA,QAApC;AAA8CG,EAAAA;AAA9C,CAAhB;AAEA,eAAeG,OAAf","sourcesContent":["import API, { TOKEN_KEY , setToken } from './APIUtils';\nimport { IUser } from '../../types';\nimport { setLocalStorage } from '../../utils/utils';\n\ntype User = {\n  user: IUser & { token: string };\n};\n\nfunction handleUserResponse({ user: { token, ...user } }: User) {\n  setLocalStorage(TOKEN_KEY, token);\n  setToken(token);\n  return user;\n}\n\nfunction getCurrentUser() {\n  return API.get<User>('/user');\n}\n\nfunction login(email: string, password: string) {\n  return API.post<User>('/users/login', {\n    user: { email, password },\n  }).then((user) => handleUserResponse(user.data));\n}\n\nfunction register(user: {\n  username: string;\n  email: string;\n  password: string;\n}) {\n  return API.post<User>('/users', { user }).then((user) =>\n    handleUserResponse(user.data),\n  );\n}\n\nfunction updateUser(user: IUser & Partial<{ password: string }>) {\n  return API.put<User>('/user', { user });\n}\n\nfunction logout() {\n  localStorage.removeItem(TOKEN_KEY);\n  setToken(null);\n}\n\nconst AUTHAPI = {getCurrentUser, updateUser, login, register, logout}\n\nexport default AUTHAPI\n"]},"metadata":{},"sourceType":"module"}