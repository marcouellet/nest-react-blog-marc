{"ast":null,"code":"var _jsxFileName = \"F:\\\\Documents\\\\Documents\\\\_Nest\\\\nest-react-blog-marc\\\\blog-frontend-axios\\\\src\\\\components\\\\common\\\\UploadImage.tsx\";\nimport React from 'react';\n\nconst ImageUpload = props => {\n  const encode = str => Buffer.from(str, 'binary').toString('base64');\n\n  const getBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const getBinaryString = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsBinaryString(file);\n    });\n  };\n\n  const getArrayBuffer = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsArrayBuffer(file);\n    });\n  };\n\n  const onImageChange = event => {\n    if (event.target.files && event.target.files[0]) {\n      let img = event.target.files[0];\n      getArrayBuffer(img).then(data => {\n        const imageData = {\n          data: Buffer.from(data),\n          contentType: img.type\n        };\n        const imageString = imageData.data.toString('base64');\n        props.onImageUpload(imageData);\n      });\n      getBase64(img).then(data => {\n        const imageString = data; // props.onImageUpload(imageData);\n      });\n      getBinaryString(img).then(data => {\n        const imageString = encode(data); // props.onImageUpload(imageData);\n      });\n    }\n  };\n\n  return React.createElement(\"input\", {\n    className: \"col-md-3\",\n    type: \"file\",\n    id: \"imageFile\",\n    name: \"imageFile\",\n    accept: \".jpeg, .png, .jpg\",\n    onChange: e => onImageChange(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  });\n};\n\nexport default ImageUpload;","map":{"version":3,"sources":["F:/Documents/Documents/_Nest/nest-react-blog-marc/blog-frontend-axios/src/components/common/UploadImage.tsx"],"names":["React","ImageUpload","props","encode","str","Buffer","from","toString","getBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","getBinaryString","readAsBinaryString","getArrayBuffer","readAsArrayBuffer","onImageChange","event","target","files","img","then","data","imageData","contentType","type","imageString","onImageUpload","e"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { ImageData } from '../../types';\r\n\r\nexport interface ImageUploadProps {\r\n    onImageUpload: (imageData: ImageData) => void;\r\n}\r\n\r\nconst ImageUpload = (props: ImageUploadProps) => {\r\n\r\n    const encode = (str: string):string => Buffer.from(str, 'binary').toString('base64');\r\n\r\n    const getBase64 = (file: File) => {\r\n        return new Promise<string>((resolve,reject) => {\r\n           const reader = new FileReader();\r\n           reader.onload = () => resolve(reader.result as string);\r\n           reader.onerror = error => reject(error);\r\n           reader.readAsDataURL(file);\r\n        });\r\n    }\r\n\r\n    const getBinaryString = (file: File) => {\r\n        return new Promise<string>((resolve,reject) => {\r\n           const reader = new FileReader();\r\n           reader.onload = () => resolve(reader.result as string);\r\n           reader.onerror = error => reject(error);\r\n           reader.readAsBinaryString(file);\r\n        });\r\n    }\r\n\r\n    const getArrayBuffer = (file: File) => {\r\n        return new Promise<ArrayBuffer>((resolve,reject) => {\r\n           const reader = new FileReader();\r\n           reader.onload = () => resolve(reader.result as ArrayBuffer);\r\n           reader.onerror = error => reject(error);\r\n           reader.readAsArrayBuffer(file);\r\n        });\r\n    }\r\n\r\n    const onImageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (event.target.files && event.target.files[0]) {\r\n            let img = event.target.files[0];\r\n            getArrayBuffer(img).then(data => {\r\n                const imageData: ImageData = { data: Buffer.from(data), contentType: img.type};\r\n                const imageString = imageData.data.toString('base64');\r\n                props.onImageUpload(imageData);\r\n            });\r\n            getBase64(img).then(data => {\r\n                const imageString = data;\r\n                // props.onImageUpload(imageData);\r\n            });\r\n            getBinaryString(img).then(data => {\r\n                const imageString = encode(data);\r\n                // props.onImageUpload(imageData);\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n            <input className=\"col-md-3\" type=\"file\" id=\"imageFile\" name='imageFile' accept=\".jpeg, .png, .jpg\"  \r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) => onImageChange(e)} />\r\n    )\r\n\r\n}\r\n\r\nexport default ImageUpload;\r\n"]},"metadata":{},"sourceType":"module"}